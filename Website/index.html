<!doctype html>
<html class="no-js" lang="en">
<head>
	<title>Telemetry & Analytics’ Pipelines for Game Balancing - GAM310 | AWS re:Invent</title>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1 user-scalable=no">

	<!--Favicon-->
	<link rel="icon" type="image/ico" href="https://a0.awsstatic.com/main/images/site/fav/favicon.ico" /> 
	<link rel="shortcut icon" type="image/ico" href="https://a0.awsstatic.com/main/images/site/fav/favicon.ico" /> 
	<link rel="apple-touch-icon" sizes="57x57" href="https://a0.awsstatic.com/main/images/site/touch-icon-iphone-114-precomposed.png" /> 
	<link rel="apple-touch-icon" sizes="72x72" href="https://a0.awsstatic.com/main/images/site/touch-icon-ipad-144-precomposed.png" /> 
	<link rel="apple-touch-icon" sizes="114x114" href="https://a0.awsstatic.com/main/images/site/touch-icon-iphone-114-precomposed.png" /> 
	<link rel="apple-touch-icon" sizes="144x144" href="https://a0.awsstatic.com/main/images/site/touch-icon-ipad-144-precomposed.png" /> 

	<link href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,400,700" rel="stylesheet">
	<link rel="stylesheet" href="style.css" type="text/css" media="all">
	<script src="https://sdk.amazonaws.com/js/aws-sdk-2.2.32.min.js"></script>
</head>
<body class="template-aside yellow page-sessions loading" data-page="sessions">
	<div class="video">
		<div class="overlay"></div>
		<video width="100%" height="100%" autoplay loop muted poster="">
			<source src="https://reinvent.awsevents.com/_media/video/hero-yellow.mp4?20170517" type="video/mp4">
			Your browser does not support the video tag.
		</video>
	</div>
	<div class="site-wrapper">
		<div class="site-content">

<header class="site-header">
	<div class="central-column">
		<a class="site-branding" href="/">
			<img src="https://reinvent.awsevents.com/_media/images/branding/aws-reinvent-logo.png" alt="AWS re:Invent 2017 logo" />
			<span class="offscreen">AWS re:Invent</span>
		</a>
	</div>
</header>

<main class="site-main">
	<header class="page-header"> 
		<div class="central-column">
			<div class="text">
				<h2 class="headline-s1">GAM310</h2>
				<h3 class="headline-s2">Telemetry & Analytics’ Pipelines for Game Balancing</h3>
				<p class="lower-link">Welcome to the Workshop!</p>
			</div>
		</div>
	</header>
	<div class="sections body-copy">
		<section id="section-sessions" class="page-section dark">
			<div class="central-column">
				<div class="indent">
					<p class="intro">In this workshop, we build telemetry/analytics data processing pipelines to assist game developers/architects, designers and producers make certain game balancing decisions as well as troubleshooting the game. We work with a fictitious RPG and ingest data for in-game events. We then analyze the data to help with game balancing and other relevant recommendations for game developers and designers. As a participant, you will use Amazon Kinesis, Amazon Kinesis Firehose, Amazon Analytics, Amazon EMR, Amazon Redshift, Amazon S3, Amazon Athena and Amazon QuickSight. Prerequisites include having your own laptop and an interest in big data services, game data processing & analytics. This workshop will benefit developers and architects, in addition to game designers, producers, and others interested in building analytics pipelines on AWS.</p>
					<div class="session">
						<h3>WORKSHOP DETAILS</h3>
						<p>This workshop will be broken down into a series of labs that flow on from each other (that is, you must complete each lab in order before proceeding with the next). The four lab exercises that will be covered are:</p>
						<div class="indent-show">
							<p>Lab 1: Building an Analytics Pipeline</p>
							<p>Lab 2: Building a Serverless Analytics Pipeline</p>
							<p>Lab 3: Performing Analytics on a Stream</p>
							<p>Lab 4: Building a Big Data Analytics Environment</p>
						</div>
						<p>As a reminder, you should have a laptop device (which you likely have if you're reading this) and a clean AWS account, with <span class="bold">AdministratorAccess</span> policy-level access. AWS Credits will be provided to the value of $USD30.</p>
						<p>If you require assistance in any of the lab exercises, please click on the button at the top-right corner of all of the lab instruction pages to request help. A facilitator will come around to your seat when they are available.

						<h3 class="overline">PRE-REQUISITES</h3>
						<p>This workshop has some pre-requisites.</p>
						<div class="indent-show" id="1-1-button"><div class="expand"><a class="border" href="javascript:void();" onClick="reveal('1-1-button', '1-1-content')">CLICK TO TOGGLE INSTRUCTIONS</a></div></div>
						<div class="indent-hide" id="1-1-content">
							<p>1. You must have your own AWS account</p>
							<p>2. You must have administrative privileges associated with an IAM User and have a working <span class="bold">Access Key</span> and <span class="bold">Secret Key</span>. Instructions here: <a href="http://docs.aws.amazon.com/general/latest/gr/managing-aws-access-keys.html target="_blank">http://docs.aws.amazon.com/general/latest/gr/managing-aws-access-keys.html</a></p>
							<p>3. You must have SSH installed on your computer. It will be pre-installed on Mac or Linux, but Windows users should use <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank">PuTTY</a>.</p>
							<p>4. You must have the AWS CLI installed on your computer, and set your AWS CLI Default Region to us-west-2 using <span class="bold">aws configure</span></p>
							<p>5. You must enter your Account ID in the following form to ensure the instructions on this page are personalised. This data is not sent to us, it remains in your browser. If you are unsure what your Account ID is, enter:
								<pre>
aws sts get-caller-identity --query "Account" --output text
								</pre>
							</p>
							<p>
							Account ID: &nbsp;&nbsp;&nbsp;<input type="text" value="" id="accountidinput" name="accountidinput" />&nbsp;
							Keypair: &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" value="" id="keypairinput" name="keypairinput" />&nbsp;
							<button type="button" class="btn" onclick="changetext()">Update script text</button>
							</p>
						</div>

						<h3 class="overline">DEPLOYING A LANDING ZONE</h3>
						<p>You must now set up the landing zone for your data pipelines. For this we will use glorious CloudFormation! This template will create a new VPC, subnets, routes, security groups, create a bastion host, and log in for you.</p>
						<p id="keypair">Please enter the following command to create the foundation infrastructure:</p>
						<div id="code1">
aws cloudformation create-stack --stack-name GamingWorkshopStack --template-url https://s3-us-west-2.amazonaws.com/gam310-2017/gam310-workshop-cfn.yml --parameters ParameterKey=Ec2KeyPair,ParameterValue=%KEYPAIR% --capabilities CAPABILITY_IAM
</div><br />
						<p> Alternatively, you can click <a href="https://us-west-2.console.aws.amazon.com/cloudformation/home?region=us-west-2#/stacks/new?&templateURL=https://s3-us-west-2.amazonaws.com/gam310-2017/gam310-workshop-cfn.yml" target="_blank">this link to use the Web Console</a></p>
						<p>If you have troubles with the script, please follow the CLI commands in this section.</p>
						<div class="indent-show" id="1-2-button"><div class="expand"><a class="border" href="javascript:void();" onClick="reveal('1-2-button', '1-2-content')">CLICK TO TOGGLE INSTRUCTIONS</a></div></div>
						<div class="indent-hide" id="1-2-content">
							<div id="code2">## Create a key pair to use for SSH access into the Bastion Host
aws ec2 create-key-pair --key-name WorkshopKeyPair --query 'KeyMaterial' --output text &gt; WorkshopKeyPair.pem

## Grant the file owner (you!) read permission
chmod 400 WorkshopKeyPair.pem
</div>
						</div><br />
						<p>This CloudFormation stack will take about 15 minutes to build.</p>

						<h3 class="overline">PIPELINE 1 - ANALYTICS PIPELINE</h3>
						<p>Now that you have your Bastion Host configured and have logged in, let's set up your first analytics pipeline! Start by logging into the instance. You'll need to grab your KeyPair filename and the BastionPublicDNS from the Outputs of your CloudFormation stack. </p>
						<div id="code3"># This will show all your outputs.
aws cloudformation describe-stacks --stack-name GamingWorkshopStack

# Look for the BastionPublicDNS Output value, then replace &lt;WorkshopKeyPair.pem&gt; and &lt;BastionPublicDNS&gt;
ssh -i &lt;WorkshopKeyPair.pem&gt; ec2-user@&lt;BastionPublicDNS&gt;
</div>
						<p>Now that you're in the instance, configure the AWS CLI to use your account credentials and create your Kinesis streams!
						<div class="indent-show" id="1-3-button"><div class="expand"><a class="border" href="javascript:void();" onClick="reveal('1-3-button', '1-3-content')">CLICK TO TOGGLE INSTRUCTIONS</a></div></div>
						<div class="indent-hide" id="1-3-content">
							<p><div id="code4">##Configure the AWS CLI
aws configure
# Use your existing AWS Access Key ID, AWS Secret Access Key, Default region name=us-west-2 and leave the Default output format empty (just hit Enter)

## Create your Kinesis stream for analytics
aws kinesis create-stream --stream-name workshopAnalyticsStream --shard-count 10
## Create your Kinesis stream for telemetry
aws kinesis create-stream --stream-name workshopTelemetryStream --shard-count 10
</div>
							</p>
						</div>

						<h3 class="overline">PIPELINE 1 - CREATE YOUR FIREHOSE DELIVERY STREAMS</h3>
						<p>Your Firehose policy is ready to go! Let's apply it, then set up your log groups and Redshift.</p>
						<div class="indent-show" id="1-4-button"><div class="expand"><a class="border" href="javascript:void();" onClick="reveal('1-4-button', '1-4-content')">CLICK TO TOGGLE INSTRUCTIONS</a></div></div>
						<div class="indent-hide" id="1-4-content">
							<p id="fh-streams"><div id="code5"># Create a Role for Firehose from the Policy document provided
aws iam create-role --role-name firehose_delivery_role --assume-role-policy-document file://iam-base-fh-policy.json

# Apply a Firehose policy to the Firehose Role
aws iam put-role-policy --role-name firehose_delivery_role --policy-name iam-fh-policy --policy-document file://iam-fh-policy.json

## Create a log group and streams for analytics
aws logs create-log-group  --log-group-name "/aws/kinesisfirehose/workshopAnalyticsFH"
aws logs create-log-stream --log-group-name "/aws/kinesisfirehose/workshopAnalyticsFH" --log-stream-name "S3Delivery"
aws logs create-log-stream --log-group-name "/aws/kinesisfirehose/workshopAnalyticsFH" --log-stream-name "RedshiftDelivery"

## Create a log group and streams for telemetry
aws logs create-log-group  --log-group-name "/aws/kinesisfirehose/workshopTelemetryFH"
aws logs create-log-stream --log-group-name "/aws/kinesisfirehose/workshopTelemetryFH" --log-stream-name "S3Delivery"
aws logs create-log-stream --log-group-name "/aws/kinesisfirehose/workshopTelemetryFH" --log-stream-name "RedshiftDelivery"

## Create a log group and streams for telemetry - direct stream
aws logs create-log-group  --log-group-name "/aws/kinesisfirehose/workshopTelemetryFHDirect"
aws logs create-log-stream --log-group-name "/aws/kinesisfirehose/workshopTelemetryFHDirect" --log-stream-name "S3Delivery"
aws logs create-log-stream --log-group-name "/aws/kinesisfirehose/workshopTelemetryFHDirect" --log-stream-name "RedshiftDelivery"

## Create a log group and streams for Kinesis Analytics' App
aws logs create-log-group  --log-group-name "/aws/kinesisanalytics/workshopTelemetryKAApp"
aws logs create-log-stream --log-group-name "/aws/kinesisanalytics/workshopTelemetryKAApp" --log-stream-name "AppDelivery"
aws logs create-log-stream --log-group-name "/aws/kinesisanalytics/workshopTelemetryKAApp" --log-stream-name "FirehoseDelivery"

# Create a Kinesis Firehose Delivery Stream for analytics
aws firehose create-delivery-stream --delivery-stream-name workshopAnalyticsFH --delivery-stream-type KinesisStreamAsSource --kinesis-stream-source-configuration "KinesisStreamARN=arn:aws:kinesis:us-west-2:${accountid}:stream/workshopAnalyticsStream,RoleARN=arn:aws:iam::${accountid}:role/firehose_delivery_role" --cli-input-json file://analytics1Input.json

# Create a Kinesis Firehose Delivery Stream for analytics
aws firehose create-delivery-stream --delivery-stream-name workshopTelemetryFH --delivery-stream-type KinesisStreamAsSource --kinesis-stream-source-configuration "KinesisStreamARN=arn:aws:kinesis:us-west-2:${accountid}:stream/workshopTelemetryStream,RoleARN=arn:aws:iam::${accountid}:role/firehose_delivery_role" --cli-input-json file://telemetry1Input.json
</div></p>
						</div>


						<h3 class="overline">PIPELINE 1 - CREATE REDSHIFT TABLES</h3>
						<p>Your Firehose policy is ready to go! Let's apply it, then set up your log groups, your game bot and Redshift.</p>
						<div class="indent-show" id="1-5-button"><div class="expand"><a class="border" href="javascript:void();" onClick="reveal('1-5-button', '1-5-content')">CLICK TO TOGGLE INSTRUCTIONS</a></div></div>
						<div class="indent-hide" id="1-5-content">
							<p><div id="code6"># Connect to the Redshift DB and create the tables in Redshift. Copy the Cluster ID from your CloudFormation stack output into the %REDSHIFTCLUSTER% placeholder here.
pgcli postgres://wsuser:wsPassword0@workshopcluster.%REDSHIFTCLUSTER%.us-west-2.redshift.amazonaws.com:5439/workshopdb
create table analytics1 (playerip varchar(16), handle varchar(40), email varchar(128), uuid varchar(64), playerid bigint, country varchar(64), useragent varchar(128), datestamp timestamp, walletbalance real, playerlevel varchar(16), status varchar(16));

create table telemetry1 (datestamp timestamptz, playerid bigint, playerlevel varchar(16), squadelementmap varchar(8), gamenumber int, squadpower int, squadagility int, squadhealth int, squadluck int, squadspecial int, squadguard int, squaddamage int, squadinventoryitemcount int, bosspower int, bossagility int, bosshealth int, bossluck int, bossspecial int, bossguard int, bossdamage int, result varchar(8));
</div>
							</p>
						</div>

						<h3 class="overline">PIPELINE 1 - FIRE UP YOUR GAME BOT!</h3>
						<p>Let's fire up your game bot! You have a little web application installed on your bastion host that will propagate data from your EC2 instance to Kinesis. You can get the URL from your CloudFormation Stack Outputs. It's entitled "GameBotURLPublicDns".</p>
						<div class="indent-show" id="1-9-button"><div class="expand"><a class="border" href="javascript:void();" onClick="reveal('1-9-button', '1-9-content')">CLICK TO TOGGLE INSTRUCTIONS</a></div></div>
						<div class="indent-hide" id="1-9-content">
							<p>1. Visit http://${GameBotURLPublicDns}/kinesis-datagen</p>
							<p>2. Enter your Kinesis stream name into the StreamName field. This should be %ANALYTICSSTREAMNAME%.</p>
							<p>3. Hit the "Generate" button.</p>
							<p></p>
							</pre>
						</div>

						<h3 class="overline">PIPELINE 1 - SET UP QUICKSIGHT</h3>
						<p>Let's get QuickSight working!</p>
						<div class="indent-show" id="1-10-button"><div class="expand"><a class="border" href="javascript:void();" onClick="reveal('1-10-button', '1-10-content')">CLICK TO TOGGLE INSTRUCTIONS</a></div></div>
						<div class="indent-hide" id="1-10-content"><br />
							<p>1. Go to <span class="bold">https://quicksight.aws</span>.</p>
							<p>2. Select "Sign Up For Free" (or "Sign In" if you've used it before and have an account)</p>
							<p>3. Click on the Region in the top-right, and select "US West (Oregon)"</p>
							<p>4. Close the Welcome window</p>
							<p>5. Click the "New analysis" button in the top left</p>
							<p>6. Click the "New data set" button in the top left</p>
							<p>7. Click the "Redshift - Auto-discovered" button</p>
							<p>8. A "New Redshift data source" window will appear. For the "Data source name" enter "GamingWorkshop". For "Instance ID" click the drop-down arrow on the right of the selection box, and select "workshopcluster". The "Database name" should be automatically populated with "workshopdb", but you will need to enter a "Username" of "wsuser" and "Password" of "wsPassword0". Click the "Validate" button on the bottom left of the window. This should turn to "Validated" with a green tick if you're successful. Click "Create data source".</p>
							<p>9. Select "analytics1" and click the "Select" button on the bottom right</p>
							<p>10. Select "Directly query your data" and click the "Visualize" button on the bottom right</p>
							<p>11. Explore your data!</p>
							</pre>
						</div>

						<h3 class="overline">CLEANING UP YOUR ENVIRONMENT</h3>
						<p>You've created a lot of things in your account! Let's clean them up so you don't keep paying for them.</p>
						<div class="indent-show" id="1-15-button"><div class="expand"><a class="border" href="javascript:void();" onClick="reveal('1-15-button', '1-15-content')">CLICK TO TOGGLE INSTRUCTIONS</a></div></div>
						<div class="indent-hide" id="1-15-content">
							<p><div id="code7">aws iam delete-role-policy --role-name redshift_fullaccess_role --policy-name iam-redshift-policy
aws iam delete-role --role-name redshift_fullaccess_role
aws iam delete-role-policy --role-name firehose_delivery_role --policy-name iam-fh-policy
aws iam delete-role --role-name firehose_delivery_role
aws logs delete-log-group --log-group-name "/aws/kinesisfirehose/TelemetryFHStream"
aws logs delete-log-group --log-group-name "/aws/kinesisfirehose/AnalyticsFHStream"
aws firehose delete-delivery-stream --delivery-stream-name TelemetryFHStream
aws firehose delete-delivery-stream --delivery-stream-name AnalyticsFHStream
aws kinesis delete-stream --stream-name TelemetryStream
aws kinesis delete-stream --stream-name AnalyticsStream
accountid="$(aws sts get-caller-identity --query "Account" --output text)"
aws s3api delete-bucket --bucket "workshop-data-${accountid}"
aws s3api delete-bucket --bucket "workshop-bot-${accountid}"

## QuickSight: 54.70.204.128/27

## Cleanup
#############################################################################################
## You will need to run the following commands from your laptop:
aws ec2 terminate-instances --instance-ids &lt;instance-id&gt;
aws redshift delete-cluster --cluster-identifier examplecluster --skip-final-cluster-snapshot
aws redshift delete-cluster-subnet-group --cluster-subnet-group-name workshopsubnetgroup
aws s3api delete-bucket --bucket  --region us-west-2

## Iterate for more than 1 resource, as required
aws ec2 delete-key-pair --key-name myWorkshopKeyPair
aws ec2 delete-security-group --group-id &lt;bastion-security-group-id&gt;
aws ec2 delete-security-group --group-id &lt;redshift-security-group-id&gt;
aws ec2 delete-subnet --subnet-id &lt;subnet-id1&gt;
aws ec2 delete-subnet --subnet-id &lt;subnet-id2&gt;
aws ec2 delete-subnet --subnet-id &lt;subnet-id3&gt;
aws ec2 delete-route-table --route-table-id &lt;route-table-id&gt;
aws ec2 detach-internet-gateway --internet-gateway-id &lt;igw-id&gt; --vpc-id &lt;vpc-id&gt;
aws ec2 delete-internet-gateway --internet-gateway-id &lt;igw-id&gt;
aws ec2 delete-vpc --vpc-id &lt;vpc-id&gt;
</div>
							</p>
						</div>

						<h3 class="overline">TO START THE WORKSHOP</h3>
						<p>... please enter the seat number for which you are seated at below:</p>
						<div class="indent-show"><div class="expand"><input type="text" id="seat">&nbsp;<a class="border" href="javascript:void();" onClick="validateSeat();">SUBMIT</a>&nbsp;<span id="message">&nbsp;</span></div></div>
					</div>
				</div>
			</div>
		</section>
	</div>
</main>

		</div>
	</div>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ace.js"></script>
	<script>
		var code1 = ace.edit("code1");
		code1.setTheme("ace/theme/idle_fingers");
    	code1.getSession().setMode("ace/mode/snippets");
    	// code1.getSession().setUseWrapMode(true);
    	code1.setReadOnly(true);
    	code1.setShowPrintMargin(false);
    	code1.setOptions({
    		maxLines: code1.session.getLength()
    	});
	</script>
	<script>
		var code2 = ace.edit("code2");
		code2.setTheme("ace/theme/idle_fingers");
    	code2.getSession().setMode("ace/mode/snippets");
    	code2.setReadOnly(true);
    	code2.setShowPrintMargin(false);
    	code2.setOptions({
    		maxLines: code2.session.getLength()
    	});
	</script>
	<script>
		var code3 = ace.edit("code3");
		code3.setTheme("ace/theme/idle_fingers");
    	code3.getSession().setMode("ace/mode/snippets");
    	code3.setReadOnly(true);
    	code3.setShowPrintMargin(false);
    	code3.setOptions({
    		maxLines: code3.session.getLength()
    	});
	</script>
	<script>
		var code4 = ace.edit("code4");
		code4.setTheme("ace/theme/idle_fingers");
    	code4.getSession().setMode("ace/mode/snippets");
    	code4.setReadOnly(true);
    	code4.setShowPrintMargin(false);
    	code4.setOptions({
    		maxLines: code4.session.getLength()
    	});
	</script>
	<script>
		var code5 = ace.edit("code5");
		code5.setTheme("ace/theme/idle_fingers");
    	code5.getSession().setMode("ace/mode/snippets");
    	code5.setReadOnly(false);
    	code5.setShowPrintMargin(false);
    	code5.setOptions({
    		maxLines: code5.session.getLength()
    	});
	</script>
	<script>
		var code6 = ace.edit("code6");
		code6.setTheme("ace/theme/idle_fingers");
    	code6.getSession().setMode("ace/mode/snippets");
    	code6.setReadOnly(false);
    	code6.setShowPrintMargin(false);
    	code6.setOptions({
    		maxLines: code6.session.getLength()
    	});
	</script>
	<script>
		var code7 = ace.edit("code7");
		code7.setTheme("ace/theme/idle_fingers");
    	code7.getSession().setMode("ace/mode/snippets");
    	code7.setReadOnly(true);
    	code7.setShowPrintMargin(false);
    	code7.setOptions({
    		maxLines: code7.session.getLength()
    	});
	</script>
	<script>
		function validateSeat() {
			var seat = document.getElementById("seat").value ;
			if (isNaN(seat) || seat < 1 || seat > 99) {
				// Not valid - show error
				document.getElementById("message").innerHTML = 'Please enter a seat number between 1 & 99';
				setTimeout(function() {
					document.getElementById("message").innerHTML = '&nbsp;';
				}, 5000);
			} else {
				// Initialize the Amazon Cognito credentials provider
				AWS.config.region = 'eu-west-1'; // Region
				AWS.config.credentials = new AWS.CognitoIdentityCredentials({
					IdentityPoolId: 'eu-west-1:2067869c-18ec-4ea1-a12d-41bc840abc56',
				});

				var input = {
					seat: document.getElementById("seat").value,
					lab: '1'
				}

				var lambda = new AWS.Lambda();
				lambda.invoke({
					FunctionName: 'cmp317WorkshopUpdate',
					Payload: JSON.stringify(input)
				}, function (err, data) {
					if (err) {
						console.log(err, err.stack);
						document.getElementById("message").innerHTML = 'There was a problem registering your seat in the backend database';
						setTimeout(function() {
							document.getElementById("message").innerHTML = '&nbsp;';
						}, 5000);
					} else {
						window.location.href = '/lab_1.html?seat=' + document.getElementById("seat").value;
					}
				})

			}
		}

		function reveal(button, content) {
			if (document.getElementById(content).className == 'indent-show') {
			document.getElementById(content).className = 'indent-hide';
		} else {
			document.getElementById(content).className = 'indent-show';
		}
		}

		function changetext() {
			document.getElementById("keypair").innerHTML = document.getElementById("keypair").innerHTML.replace(/\%KEYPAIR\%/g,document.getElementById("keypairinput").value);
			document.getElementById("iam-fh-policy").innerHTML = document.getElementById("iam-fh-policy").innerHTML.replace(/\%ACCOUNTID\%/g,document.getElementById("accountidinput").value);
			document.getElementById("analyticsInput").innerHTML = document.getElementById("analyticsInput").innerHTML.replace(/\%ACCOUNTID\%/g,document.getElementById("accountidinput").value);
			document.getElementById("telemetryInput").innerHTML = document.getElementById("telemetryInput").innerHTML.replace(/\%ACCOUNTID\%/g,document.getElementById("accountidinput").value);
			document.getElementById("fh-streams").innerHTML = document.getElementById("fh-streams").innerHTML.replace(/\%ACCOUNTID\%/g,document.getElementById("accountidinput").value);
		}

		function changeredshifttext() {
			document.getElementById("analyticsInput").innerHTML = document.getElementById("analyticsInput").innerHTML.replace(/\%REDSHIFTCLUSTER\%/g,document.getElementById("redshiftinput").value);
			document.getElementById("telemetryInput").innerHTML = document.getElementById("telemetryInput").innerHTML.replace(/\%REDSHIFTCLUSTER\%/g,document.getElementById("redshiftinput").value);
		}
	</script>
</body>

</html>